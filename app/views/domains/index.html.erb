<% if can? :create, Domain %>
  <span class="u-pull-right"><%= link_to 'Add', new_domain_path, :class => 'button button-primary-color' %></span>
<% end %>
<h4>Domains</h4>
<hr>

<div class="row">
  <table class="u-full-width">
    <thead>
      <tr>
        <th>Domain</th>
        <th>Email count</th>
        <th class="align-right">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% Domain.all.each do |domain| %>
        <tr>
          <td>
            <strong><%= link_to domain.domain, domain_path(domain) %></strong>
          </td>
          <td>
            <%= domain.emails.count %>
          </td>
          <td class="align-right">
            <% if can? :edit, Domain %>
              <%= link_to 'Edit', edit_domain_path(domain), :class => "button button-small" %>
            <% end %>
            <% if can? :delete, Domain %>
              <%= link_to 'Delete', domain_path(domain),
                    method: :delete,
                    data: { confirm: 'Are you sure you want to delete this domain? This will delete all dependent emails!' },
                    :class => "button button-small button-danger" %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
